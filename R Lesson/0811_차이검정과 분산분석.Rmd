---
title: "R 통계분석 7장 ~"
author: "BBJ"
date: "2022-08-11"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# 2-7장 두 집단의 차이검정

## 평균검정: t-test
  • 평균을 비교할 때 쓸 수 있는 가설검정 방법
  
  • 단일표본 평균검정: one-sample t-test
    - 표본평균을 가설로 정한 값과 비교
      • 하나의 표본 데이터를 이용하여 모집단의 평균을 검정
        - 표본집단의 평균이 모집단의 평균과 같은가를 검정하고 싶을 때
      • *R: t.test(x, mu)*
    
  • 독립표본 평균검정: two-independent-samples t-test
    - 두 집단간의 평균을 비교해서 집단의 차이에 대한 가설검정
      • 두 개의 독립표본 데이터를 이용하여
        - 각각 대응되는 두 개의 모집단평균이 서로 동일한지 검정
      • 두 집단이 서로 차이가 있는지를 검정하는 것과 같은 의미
        - 남녀 간의 영어시험 점수에 차이가 있는가?
        - 흡연자와 비흡연자 간의 폐질환 발생률은 차이가 있는가
        - 고학력자와 저학력자 간의 텔레비전 시청 시간에 차이가 있는가?
      • *R: t.test(formula, data, …)*

  • 대응표본 평균검정: paired-samples t-test
    - 관측값이 서로 쌍을 이루는 경우(예: 사전-사후)에 대한 가설검정
      • 독립표본의 가정: 두 개의 표본이 서로 독립인 모집단으로부터 표본추출
      • 두 개의 표본이 서로 독립이 아닌 모집단으로부터 추출
      
      • 대응표본: 두 표본의 값이 쌍(pair)을 이루고 있는 경우
      • 예) 아침식사가 IQ 테스트 점수에 미치는 영향
        - 독립표본: 무작위로 실험 대상자를 선정하여 두 개의 집단으로 나눔
        • 한 집단은 아침식사를 하고, 다른 집단은 아침식사를 거르고 테스트
        
        - 대응표본: 무작위로 실험 대상자를 선정: IQ 테스트를 두 차례 실시
        • 한 번은 아침식사를 하고, 다른 한 번은 아침식사를 하지 않고 테스트
```{r}
t.test(extra ~ group, data = sleep, pair = T )

str(sleep)

library(tidyr)
wide.df <- spread(sleep, key = group, value = extra)
summary(wide.df)

# tapply(sleep$extra, INDEX = )
names(wide.df) <- c("ID", "group.1", "group.2")

t.test(wide.df$group.1, wide.df$group.2, paired = T)
```

## 8장 x제곱-분포와 x2-검정
## 독립성검정과 적합성검정
  • 교차표를 통해 범주형으로 수집된 두 변수의 조합별 빈도 파악
  
  • 독립성 검정: independence test
    - 두 범주형 변수 간의 관련성이 모집단에서 존재하는지 검정
    
  • 적합성 검정: goodness-of-fit test
    - 두 개 이상의 범주를 갖는 범주형 변수의 범주별 비율의 분포를 관측
    - 관측된 범주별 빈도로 모집단에서 기대되는 비율 분포가 존재하는지 검정

  • *카이스퀘어 검정: chi-square test*
    • 교차표상의 응답 빈도를 바탕으로 범주형 변수 간의 관련성 검정
    • 예) 안전벨트 착용과 승객 안전 간의 관계 분석
      • 교통사고 환자의 안전벨트 착용 유무와 환자 상태를 조사한 교차표
    
    ▪ 통계적 가설검정:
      • 귀무가설: 안전벨트 착용과 승객 안전 간에는 관련이 없다
      
      • 관측빈도: observed count
        - 실제로 관측된 값. 교차표상의 셀값
      
      • 기대빈도: expected count
        - 귀무가설이 참이라는 전제하에 우리가 기대할 수 있는 빈도
        • 기대빈도의 계산
          - 귀무가설이 참이라면 안전벨트 착용 여부와 관계없이
          - 두 집단 모두에게서 환자의 상태별 비율이 동일하게 나타날 것 
```{r}
v <- rchisq(n = 10000, df = 1)
# random variable chi-square
hist(v, col = 'orange')

x <- 
```




















