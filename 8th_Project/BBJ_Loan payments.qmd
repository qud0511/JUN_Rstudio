---
title: "BBJ_Loan payments anal"
format: html
editor: visual
---

| 변수명             | 해석(의미)                                       |
|--------------------|--------------------------------------------------|
| **Loan_ID**        | 대출한 고객의 고유한 ID                          |
| **loan_status**    | 이번 분석의 타겟 변수, 상환 여부를 나타냄        |
| **Principal**      | 고객이 대출받은 금액                             |
| **terms**          | 기간                                             |
| **effective_date** | 실제 계약 효과가 발휘하기 시작한 날짜            |
| **due_date**       | 대출금 납부 기한 날짜                            |
| **paid_off_time**  | 고객이 은행에 모두 상환한 날짜, 시간             |
| **past_due_days**  | 고객이 은행에 대출금을 모두 상환하는데 걸린 기간 |
| **age**            | 고객의 나이                                      |
| **education**      | 고객의 교육 수준                                 |
| **Gender**         | 고객의 성별                                      |

데이터 전처리

```{r}
library(dplyr)  # Used for almost all data handling 

loan.df <- read.csv('Loan payments data.csv')
loan.df
str(loan.df)

cat("\n\n")

# factor로 변환
loan.df <- loan.df %>% 
  mutate(Loan_ID = factor(Loan_ID), loan_status = factor(loan_status), effective_date = factor(effective_date),ndue_date = factor(due_date), paid_off_time = factor(paid_off_time), education = factor(education), Gender = factor(Gender))

str(loan.df)

cat("\n\n")

# 결측치 확인
library(VIM) # Missing values processing, aagr()
aggr(loan.df, prop = F, combined = T, numbers = T, sorVars = T, sortCombs = T)

# 필요한 데이터만 추출
library(lubridate) # Time series data Pre-processing, mdy()
loan.df <- loan.df %>% 
  select("loan_status", "Principal", "terms", 
         "effective_date", "due_date", "age", "education", "Gender") %>% 
  # 종속 변수인 loan_status를 성공과 실패, 2개 범주로 변환 
  mutate(loan_status = factor(ifelse(loan_status == "PAIDOFF", 
                                     "Success", "Failure")), 
         effective_date = mdy(effective_date), 
         due_date = mdy(due_date))

str(loan.df)

```

EDA

```{r}
# 수치형 자료 산점도, boxplot
# 범주형 자료 barplot, table

# pairs.panels(df)  
# library(corrgram)  
# corrgram(df, order = T, lower.panel= '', upper.panel = 'panel.pie') 

par(mfrow = c(2, 2))
# 연령
boxplot(loan.df$age, col = 'tomato', main = '연령')
# 대출원금
boxplot(loan.df$Principal, col = 'blue', main = '대출원금')
# 기간
boxplot(loan.df$terms, col = 'yellow', main = '기간')
par(mfrow = c(1, 1))


par(mfrow = c(2, 2))
# 대출상환 상태
tab.status <- table(loan.df$loan_status)
barplot(tab.status, col = rainbow(3), 
        main = '대출상환 상태')
tab.Gender <- table(loan.df$Gender)

# 성별
barplot(tab.Gender, col = rainbow(2), 
        main = '성별')

# 최종 학력
tab.edu <- table(loan.df$education)
barplot(tab.edu, col = rainbow(4), beside = T, 
        main = '최종 학력')
par(mfrow = c(1, 1))
```

로

```{r}

```
